<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Visualizing Team Talent from Player Recruiting Rankings • cfbfastR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Visualizing Team Talent from Player Recruiting Rankings">
<meta name="description" content="A quick way to visually approximate how much talent each school recruited using &lt;code&gt;cfbfastR&lt;/code&gt; and &lt;code&gt;ggplot2&lt;/code&gt;.">
<meta property="og:description" content="A quick way to visually approximate how much talent each school recruited using &lt;code&gt;cfbfastR&lt;/code&gt; and &lt;code&gt;ggplot2&lt;/code&gt;.">
<meta property="og:image" content="https://github.com/sportsdataverse/cfbfastR-data/blob/main/themes/social_card_cfbfastR_final_quote.png?raw=true">
<meta property="og:image:alt" content="When you code good, you know good. When you know good, you win good. When you win good, they pay good.">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@arbitanalytics">
<meta name="twitter:site" content="@cfbfastR">
<script defer data-domain="cfbfastr.sportsdataverse.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">cfbfastR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.9.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../index.html" title="cfbfastR"><span class="fa fas fa-home"></span> </a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-funcs" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-code"></span> Funcs</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-funcs">
<li><a class="dropdown-item" href="../reference/index.html">Function Index</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>cfbfastR Data</h6></li>
    <li><a class="dropdown-item" href="../reference/load_cfb_pbp.html">Load Full Season PBP Data</a></li>
    <li><a class="dropdown-item" href="../reference/update_cfb_db.html">Update or Create Database</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_pbp_data.html">Play-by-Play Data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>CFB Data</h6></li>
    <li><a class="dropdown-item" href="../reference/register_cfbd.html">CFBD API Keys</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_games.html">Games</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_play.html">Plays</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_drives.html">Drives</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_teams.html">Teams</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_players.html">Players</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_stats.html">Statistics</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_metrics.html">Metrics</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_ratings.html">Ratings</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_draft.html">Draft</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_betting_lines.html">Betting</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_recruiting.html">Recruiting</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_coaches.html">Coaches</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_conferences.html">Conferences</a></li>
    <li><a class="dropdown-item" href="../reference/cfbd_venues.html">Venues</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>ESPN Data</h6></li>
    <li><a class="dropdown-item" href="../reference/espn_metrics.html">ESPN Metrics</a></li>
    <li><a class="dropdown-item" href="../reference/espn_ratings_fpi.html">ESPN Ratings</a></li>
    <li><a class="dropdown-item" href="../reference/espn_cfb_scoreboard.html">ESPN Scoreboard</a></li>
    <li><a class="dropdown-item" href="../reference/espn_cfb_pbp.html">ESPN PBP</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-book-reader"></span> Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/index.html">Vignettes</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Introductory</h6></li>
    <li><a class="dropdown-item" href="../articles/intro.html">CFB Analytics with cfbfastR</a></li>
    <li><a class="dropdown-item" href="../articles/animated-wp-plotting.html">Animated Win Probability Plots</a></li>
    <li><a class="dropdown-item" href="../articles/fourth-down-plot-tutorial.html">Fourth Down Tendency Plots</a></li>
    <li><a class="dropdown-item" href="../articles/rolling-epa-graph.html">Rolling EPA Graphs</a></li>
    <li><a class="dropdown-item" href="../articles/nth-rated-recruit.html">Visualizing Team Talent with Player Recruit Rankings</a></li>
    <li><a class="dropdown-item" href="../articles/map-tutorial.html">Intro to Visualizing Recruiting Geography</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>Expected Points Model Fundamentals</h6></li>
    <li><a class="dropdown-item" href="../articles/college-football-expected-points-model-fundamentals-part-i.html">Part 1 - Model Definition</a></li>
    <li><a class="dropdown-item" href="../articles/college-football-expected-points-model-fundamentals-part-ii.html">Part 2 - Regression Models</a></li>
    <li><a class="dropdown-item" href="../articles/college-football-expected-points-model-fundamentals-part-iii.html">Part 3 - History of Expected Points Models</a></li>
    <li><h6 class="dropdown-header" data-toc-skip>CFBD Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/cfbd_betting.html">CFBD Betting</a></li>
    <li><a class="dropdown-item" href="../articles/cfbd_games.html">CFBD Games</a></li>
    <li><a class="dropdown-item" href="../articles/cfbd_plays.html">CFBD Plays</a></li>
    <li><a class="dropdown-item" href="../articles/cfbd_recruiting.html">CFBD Recruiting</a></li>
    <li><a class="dropdown-item" href="../articles/cfbd_stats.html">CFBD Stats</a></li>
    <li><a class="dropdown-item" href="../articles/cfbd_teams.html">CFBD Teams</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html"><span class="fa fas fa-newspaper"></span>  News</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown--sdv" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-project-diagram"></span>  SDV</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown--sdv">
<li><a class="external-link dropdown-item" href="https://sportsdataverse.org/">SportsDataverse</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>R Packages</h6></li>
    <li><a class="external-link dropdown-item" href="https://r.sportsdataverse.org/">sportsdataverse-R</a></li>
    <li><a class="dropdown-item" href="https://cfbfastR.sportsdataverse.org/">cfbfastR</a></li>
    <li><a class="external-link dropdown-item" href="https://hoopR.sportsdataverse.org/">hoopR</a></li>
    <li><a class="external-link dropdown-item" href="https://wehoop.sportsdataverse.org/">wehoop</a></li>
    <li><a class="external-link dropdown-item" href="https://fastRhockey.sportsdataverse.org/">fastRhockey</a></li>
    <li><a class="external-link dropdown-item" href="https://hockeyr.netlify.app/">hockeyR</a></li>
    <li><a class="external-link dropdown-item" href="https://abhiamishra.github.io/ggshakeR/">ggshakeR</a></li>
    <li><a class="external-link dropdown-item" href="https://BillPetti.github.io/baseballr/">baseballr</a></li>
    <li><a class="external-link dropdown-item" href="https://jaseziv.github.io/worldfootballR/">worldfootballR</a></li>
    <li><a class="external-link dropdown-item" href="https://usfootballR.sportsdataverse.org/">usfootballR</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/Dato-Futbol/soccerAnimate/">soccerAnimate</a></li>
    <li><a class="external-link dropdown-item" href="https://jaseziv.github.io/chessR/">chessR</a></li>
    <li><a class="external-link dropdown-item" href="https://oddsapiR.sportsdataverse.org/">oddsapiR</a></li>
    <li><a class="external-link dropdown-item" href="https://sportyR.sportsdataverse.org/">sportyR</a></li>
    <li><a class="external-link dropdown-item" href="https://torvik.dev/">toRvik</a></li>
    <li><a class="external-link dropdown-item" href="https://cfbplotR.sportsdataverse.org/">cfbplotR</a></li>
    <li><a class="external-link dropdown-item" href="https://camdenk.github.io/mlbplotR/">mlbplotR</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/sportsdataverse/softballR/">softballR</a></li>
    <li><a class="external-link dropdown-item" href="https://cfb4th.sportsdataverse.org/">cfb4th</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/nwslR/nwslR/">nwslR</a></li>
    <li><a class="external-link dropdown-item" href="https://jacklich10.github.io/gamezoneR/">gamezoneR</a></li>
    <li><a class="external-link dropdown-item" href="https://recruitr.sportsdataverse.org/">recruitR</a></li>
    <li><a class="external-link dropdown-item" href="https://puntalytics.github.io/puntr/">puntr</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Python Packages</h6></li>
    <li><a class="external-link dropdown-item" href="https://py.sportsdataverse.org/">sportsdataverse-py</a></li>
    <li><a class="external-link dropdown-item" href="https://sportypy.sportsdataverse.org/">sportypy</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/nwslR/nwslpy/">nwslpy</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/sportsdataverse/recruitR-py/">recruitR-py</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/nathanblumenfeld/collegebaseball/">collegebaseball</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Node.js Packages</h6></li>
    <li><a class="external-link dropdown-item" href="https://js.sportsdataverse.org/">sportsdataverse.js</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/nntrn/nfl-nerd/">nfl-nerd</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown--data" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fas fa-database"></span>  Data</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown--data">
<li><a class="external-link dropdown-item" href="https://collegefootballdata.com">CFBData.com</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/sportsdataverse/sportsdataverse-data/releases">SDV Data Releases</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/sportsdataverse/cfbfastR-data">Data Repository</a></li>
    <li><a class="external-link dropdown-item" href="https://github.com/sportsdataverse/cfbfastR-raw">Raw Data Repository</a></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="http://gameonpaper.com/cfb"><span class="fa fas fa-football-ball"></span>  GP</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><a class="external-link nav-link" href="http://twitter.com/cfbfastR"><span class="fa fab fa-twitter fa-lg"></span> </a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sportsdataverse/cfbfastR/"><span class="fa fab fa-github fa-lg"></span> </a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Visualizing Team Talent from Player Recruiting Rankings</h1>
                        <h4 data-toc-skip class="author">Eric Hess -
Arbitrary Analytics
<br><a href="https://twitter.com/arbitanalytics" target="blank" class="external-link"><img src="https://img.shields.io/twitter/follow/arbitanalytics?color=blue&amp;label=%40arbitanalytics&amp;logo=X&amp;style=for-the-badge" alt="@arbitanalytics"></a>
<a href="https://github.com/ehess" target="blank" class="external-link"><img src="https://img.shields.io/github/followers/ehess?color=eee&amp;logo=Github&amp;style=for-the-badge" alt="@ehess"></a>
</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sportsdataverse/cfbfastR/blob/main/vignettes/nth-rated-recruit.Rmd" class="external-link"><code>vignettes/nth-rated-recruit.Rmd</code></a></small>
      <div class="d-none name"><code>nth-rated-recruit.Rmd</code></div>
    </div>

    
    
<p>Hi <code>cfbfastR</code> users, I’m Eric Hess and I run the <a href="https://twitter.com/arbitanalytics" class="external-link">Twitter account</a> and blog
called <a href="https://arbitraryanalytics.com/" class="external-link">Arbitrary
Analytics</a>. My work focuses on sports analytics mainly for Nebraska
and the Big Ten. Today, I’m going to walk through how I used the
<code>cfbfastR</code> package to make a simple plot of recent recruiting
classes. The final output will give you a quick way to visually
approximate how much talent each school has recruited. I’m going to
assume you have a basic understanding of working with R and that your
development environment is already setup.</p>
<p>We start by loading the packages we need. The <code>cfbfastR</code>
package will provide us with our source of data. The <code>dplyr</code>
package gives us handy data manipulation tools and the ever useful pipe
(<code>%&gt;%</code>) syntax. Finally, <code>ggplot2</code> will allow
us to make a simple, functional graph of our results.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">'pacman'</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">'pacman'</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html" class="external-link">p_load</a></span><span class="op">(</span><span class="va">dplyr</span>, <span class="va">ggplot2</span>, <span class="va">cfbfastR</span><span class="op">)</span></span></code></pre></div>
<p>To create the plot I’m going to use two functions from
<code>cfbfastR</code>. The first is the <code>cfbd_team_info</code>
function. I’m going to pass <code>"B1G"</code> to the function for the
<code>conference</code> argument to get info for just Big Ten teams. The
next function I’m going to use is the
<code>cfbd_recruiting_player</code> function. The apply function allows
me to run the given function for each item in the data frame I pass to
it. In this case I run it for each team in the Big Ten. I’m calling this
function four times to get each year’s class. I’ll combine all of these
into one large data frame with every team’s recruits. For the sake of
simplicity, I am only using High School recruits as shown by the
<code>recruit_type</code> argument. You can also get Prep School
recruits (<code>recruit_type = "PrepSchool"</code>) or junior college
recruits (<code>recruit_type = "JUCO"</code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">teams</span> <span class="op">&lt;-</span> <span class="fu">cfbfastR</span><span class="fu">::</span><span class="fu"><a href="../reference/cfbd_team_info.html">cfbd_team_info</a></span><span class="op">(</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">conference</span> <span class="op">==</span> <span class="st">"Big Ten"</span><span class="op">)</span></span>
<span><span class="va">schools</span> <span class="op">&lt;-</span> <span class="va">teams</span><span class="op">$</span><span class="va">school</span></span>
<span><span class="va">yr</span> <span class="op">&lt;-</span> <span class="fu">cfbfastR</span><span class="fu">:::</span><span class="fu">most_recent_cfb_season</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">year_range</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">yr</span><span class="op">-</span><span class="fl">3</span><span class="op">)</span><span class="op">:</span><span class="va">yr</span></span>
<span><span class="va">team_year_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>year<span class="op">=</span><span class="va">year_range</span>, school <span class="op">=</span> <span class="va">schools</span><span class="op">)</span></span>
<span><span class="fu">tictoc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html" class="external-link">tic</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">all.recruits</span> <span class="op">&lt;-</span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map_dfr.html" class="external-link">map2_dfr</a></span><span class="op">(</span></span>
<span>  .x <span class="op">=</span> <span class="va">team_year_df</span><span class="op">$</span><span class="va">year</span>,</span>
<span>  .y <span class="op">=</span> <span class="va">team_year_df</span><span class="op">$</span><span class="va">school</span>,</span>
<span>  <span class="kw">function</span><span class="op">(</span><span class="va">.x</span>,<span class="va">.y</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu">cfbfastR</span><span class="fu">::</span><span class="fu"><a href="../reference/cfbd_recruiting_player.html">cfbd_recruiting_player</a></span><span class="op">(</span></span>
<span>      year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/integer.html" class="external-link">as.integer</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>,</span>
<span>      team <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">.y</span><span class="op">)</span>,</span>
<span>      recruit_type <span class="op">=</span> <span class="st">"HighSchool"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">tictoc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html" class="external-link">toc</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## 25.887 sec elapsed</span></span></code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">all.recruits</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Rows: 1,051</span></span>
<span><span class="co">## Columns: 19</span></span>
<span><span class="co">## $ id                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "114420"<span style="color: #949494;">, </span>"114678"<span style="color: #949494;">, </span>"114756"<span style="color: #949494;">, </span>"114760"<span style="color: #949494;">, </span>"11477…</span></span>
<span><span class="co">## $ athlete_id              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "4714773"<span style="color: #949494;">, </span>"4826636"<span style="color: #949494;">, </span>"4869962"<span style="color: #949494;">, </span>"4790965"<span style="color: #949494;">, </span>"4…</span></span>
<span><span class="co">## $ recruit_type            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "HighSchool"<span style="color: #949494;">, </span>"HighSchool"<span style="color: #949494;">, </span>"HighSchool"<span style="color: #949494;">, </span>"Hig…</span></span>
<span><span class="co">## $ year                    <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 2022<span style="color: #949494;">, </span>2022<span style="color: #949494;">, </span>2022<span style="color: #949494;">, </span>2022<span style="color: #949494;">, </span>2022<span style="color: #949494;">, </span>2022<span style="color: #949494;">, </span>2022<span style="color: #949494;">, </span>2022…</span></span>
<span><span class="co">## $ ranking                 <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 888<span style="color: #949494;">, </span>1161<span style="color: #949494;">, </span>1231<span style="color: #949494;">, </span>1231<span style="color: #949494;">, </span>1254<span style="color: #949494;">, </span>1254<span style="color: #949494;">, </span>1357<span style="color: #949494;">, </span>1357<span style="color: #949494;">,</span>…</span></span>
<span><span class="co">## $ name                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Joey Okla"<span style="color: #949494;">, </span>"Owen Anderson"<span style="color: #949494;">, </span>"Ashton Hollins"…</span></span>
<span><span class="co">## $ school                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Arrowhead"<span style="color: #949494;">, </span>"Hun School"<span style="color: #949494;">, </span>"George County"<span style="color: #949494;">, </span>"T…</span></span>
<span><span class="co">## $ committed_to            <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Illinois"<span style="color: #949494;">, </span>"Illinois"<span style="color: #949494;">, </span>"Illinois"<span style="color: #949494;">, </span>"Illinois"…</span></span>
<span><span class="co">## $ position                <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "IOL"<span style="color: #949494;">, </span>"TE"<span style="color: #949494;">, </span>"ATH"<span style="color: #949494;">, </span>"QB"<span style="color: #949494;">, </span>"WR"<span style="color: #949494;">, </span>"EDGE"<span style="color: #949494;">, </span>"CB"<span style="color: #949494;">, </span>…</span></span>
<span><span class="co">## $ height                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 75.0<span style="color: #949494;">, </span>76.0<span style="color: #949494;">, </span>76.0<span style="color: #949494;">, </span>74.0<span style="color: #949494;">, </span>77.0<span style="color: #949494;">, </span>75.0<span style="color: #949494;">, </span>72.0<span style="color: #949494;">, </span>78.0…</span></span>
<span><span class="co">## $ weight                  <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 285<span style="color: #949494;">, </span>235<span style="color: #949494;">, </span>170<span style="color: #949494;">, </span>190<span style="color: #949494;">, </span>180<span style="color: #949494;">, </span>246<span style="color: #949494;">, </span>180<span style="color: #949494;">, </span>250<span style="color: #949494;">, </span>180<span style="color: #949494;">, </span>2…</span></span>
<span><span class="co">## $ stars                   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> 3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>3<span style="color: #949494;">, </span>4<span style="color: #949494;">, </span>4…</span></span>
<span><span class="co">## $ rating                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 0.8648<span style="color: #949494;">, </span>0.8533<span style="color: #949494;">, </span>0.8511<span style="color: #949494;">, </span>0.8511<span style="color: #949494;">, </span>0.8500<span style="color: #949494;">, </span>0.8500…</span></span>
<span><span class="co">## $ city                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "Hartland"<span style="color: #949494;">, </span>"Skillman"<span style="color: #949494;">, </span>"Lucedale"<span style="color: #949494;">, </span>"Sicklervi…</span></span>
<span><span class="co">## $ state_province          <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "WI"<span style="color: #949494;">, </span>"NJ"<span style="color: #949494;">, </span>"MS"<span style="color: #949494;">, </span>"NJ"<span style="color: #949494;">, </span>"GA"<span style="color: #949494;">, </span>"FL"<span style="color: #949494;">, </span>"FL"<span style="color: #949494;">, </span>"IL"…</span></span>
<span><span class="co">## $ country                 <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "USA"<span style="color: #949494;">, </span>"USA"<span style="color: #949494;">, </span>"USA"<span style="color: #949494;">, </span>"USA"<span style="color: #949494;">, </span>"USA"<span style="color: #949494;">, </span>"USA"<span style="color: #949494;">, </span>"USA…</span></span>
<span><span class="co">## $ hometown_info_latitude  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> 43.10501<span style="color: #949494;">, </span>40.42011<span style="color: #949494;">, </span>30.92519<span style="color: #949494;">, </span>39.71734<span style="color: #949494;">, </span>31.149…</span></span>
<span><span class="co">## $ hometown_info_longitude <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> -88.34204<span style="color: #949494;">, </span>-74.71460<span style="color: #949494;">, </span>-88.59002<span style="color: #949494;">, </span>-74.96933<span style="color: #949494;">, </span>-8…</span></span>
<span><span class="co">## $ hometown_info_fips_code <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> "55133"<span style="color: #949494;">, </span>"34035"<span style="color: #949494;">, </span>"28039"<span style="color: #949494;">, </span>"34007"<span style="color: #949494;">, </span>"13127"<span style="color: #949494;">, </span>"…</span></span></code></pre>
<p>The next step is cleaning the data. The
<code><a href="../reference/cfbd_recruiting_player.html">cfbd_recruiting_player()</a></code> function gives us 14 pieces of
data for each player. Our graph is going to focus on just the rating and
what school they committed to. I’m going to keep the player name as well
as a check field so I can go back and check my data set more quickly if
I have any errors. The next line uses <code>dplyr</code> syntax to give
me just the highest rated 85 recruits in order by their rating. I use
this info to assign a ranking for each school’s 1-nth recruit. Finally,
I use the teams data frame again so each recruits school information can
be used on our graph.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">recruits.limited</span> <span class="op">&lt;-</span> <span class="va">all.recruits</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">rating</span>, <span class="va">committed_to</span><span class="op">)</span></span>
<span><span class="va">recruits.sorted</span> <span class="op">&lt;-</span> <span class="va">recruits.limited</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">committed_to</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html" class="external-link">top_n</a></span><span class="op">(</span><span class="fl">85</span>, <span class="va">rating</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">committed_to</span>, <span class="op">-</span><span class="va">rating</span>,.by_group<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>num <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">recruits.final</span> <span class="op">&lt;-</span> <span class="va">recruits.sorted</span> <span class="op">%&gt;%</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">teams</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"committed_to"</span><span class="op">=</span><span class="st">"school"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>If you follow the Big Ten you know a lot of schools have a shade of
red as their primary color. This can make some plots hard to read.
Because of this I’m filtering down my data to look at just recruits who
committed to a Big Ten West division school. For <code>ggplot2</code> to
use a manually defined color set, I must get a vector of colors that I
want, each team’s primary color, and assign each value a name
corresponding to the school I’m interested in.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">big.ten.west</span> <span class="op">&lt;-</span> <span class="va">recruits.final</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">division</span> <span class="op">==</span> <span class="st">"West"</span><span class="op">)</span></span>
<span><span class="va">big.ten.west.teams</span> <span class="op">&lt;-</span> <span class="va">teams</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">division</span> <span class="op">==</span> <span class="st">"West"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">big.ten.west.colors</span> <span class="op">&lt;-</span> <span class="va">big.ten.west.teams</span><span class="op">$</span><span class="va">color</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">big.ten.west.colors</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">big.ten.west.teams</span><span class="op">$</span><span class="va">school</span></span></code></pre></div>
<p>Now that we have our data collected and cleaned we finally get to the
fun part - plotting. We plot each player’s rating based on the ranking
of commit they are to a school. We also tell ggplot to use the manual
color values we defined earlier. I added some extra horizontal lines to
approximate the ratings of 3, 4, and 5 star recruits.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">big.ten.west</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">num</span>, y<span class="op">=</span><span class="va">rating</span>, color <span class="op">=</span> <span class="va">committed_to</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">big.ten.west.colors</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.9834</span>, <span class="fl">.8901</span>, <span class="fl">.7964</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, label <span class="op">=</span> <span class="st">"~ 5 Star"</span>, y <span class="op">=</span> <span class="fl">.99</span>, x <span class="op">=</span> <span class="fl">80</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, label <span class="op">=</span> <span class="st">"~ 4 Star"</span>, y <span class="op">=</span> <span class="fl">.90</span>, x <span class="op">=</span> <span class="fl">80</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html" class="external-link">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, label <span class="op">=</span> <span class="st">"~ 3 Star"</span>, y <span class="op">=</span> <span class="fl">.81</span>, x <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Player Rating"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Player Rank"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"nth-Ranked High School Recruit"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span><span class="st">"Top 85 High School Signees {yr-3}-{yr} by Big Ten West Programs"</span><span class="op">)</span>,</span>
<span>       caption <span class="op">=</span> <span class="st">"Graph by @arbitanalytics, Data from @cfbfastR"</span><span class="op">)</span></span></code></pre></div>
<p><img src="nth-rated-recruit_files/figure-html/recruit_plot-1.png" width="700"></p>
<p>From this graph we can see how well teams have recruited the last
four years. A large gap between two of the lines shows that one team has
recruited much more talent at that relative position of recruiting. In
the Big Ten West graph above, we can see that Nebraska and Wisconsin
recruit similar top level recruits. Both schools top 5 recruits are 0.95
rated or higher. However, Nebraska’s classes are much stronger from the
10th recruit on. While this graphic oversimplifies the team building
process (excluding transfers, walk-ons, etc.), it gives the reader a
good feel for the talent level at a program in a quick glance.</p>
  </main>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://twitter.com/saiemgilani" class="external-link">Saiem Gilani</a>, <a href="https://twitter.com/akeaswaran" class="external-link">Akshay Easwaran</a>, <a href="https://twitter.com/JaredDLee" class="external-link">Jared Lee</a>, <a href="https://twitter.com/arbitanalytics" class="external-link">Eric Hess</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
