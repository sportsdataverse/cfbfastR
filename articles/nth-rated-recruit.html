<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Visualizing Team Talent from Player Recruiting Rankings • cfbfastR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Visualizing Team Talent from Player Recruiting Rankings">
<meta property="og:description" content="A quick way to visually approximate how much talent each school recruited using &lt;code&gt;cfbfastR&lt;/code&gt; and &lt;code&gt;ggplot2&lt;/code&gt;.">
<meta property="og:image" content="https://github.com/saiemgilani/cfbfastR-data/blob/master/themes/social_card_cfbfastR_final_quote.png?raw=true">
<meta property="og:image:alt" content="When you code good, you know good. When you know good, you win good. When you win good, they pay good.">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:creator" content="@arbitanalytics">
<meta name="twitter:site" content="@cfbfastR">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SE5ZJL93W6"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SE5ZJL93W6');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">cfbfastR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.6.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-code"></span>
     
    Funcs
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../reference/index.html">Function Index</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">cfbfastR Data</li>
    <li>
      <a href="../reference/load_cfb_pbp.html">Load Full Season PBP Data</a>
    </li>
    <li>
      <a href="../reference/update_cfb_db.html">Update or Create Database</a>
    </li>
    <li>
      <a href="../reference/cfbd_pbp_data.html">Play-by-Play Data</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">CFB Data</li>
    <li>
      <a href="../reference/register_cfbd.html">CFBD API Keys</a>
    </li>
    <li>
      <a href="../reference/cfbd_games.html">Games</a>
    </li>
    <li>
      <a href="../reference/cfbd_play.html">Plays</a>
    </li>
    <li>
      <a href="../reference/cfbd_drives.html">Drives</a>
    </li>
    <li>
      <a href="../reference/cfbd_teams.html">Teams</a>
    </li>
    <li>
      <a href="../reference/cfbd_players.html">Players</a>
    </li>
    <li>
      <a href="../reference/cfbd_stats.html">Statistics</a>
    </li>
    <li>
      <a href="../reference/cfbd_metrics.html">Metrics</a>
    </li>
    <li>
      <a href="../reference/cfbd_ratings.html">Ratings</a>
    </li>
    <li>
      <a href="../reference/cfbd_draft.html">Draft</a>
    </li>
    <li>
      <a href="../reference/cfbd_betting.html">Betting</a>
    </li>
    <li>
      <a href="../reference/cfbd_recruiting.html">Recruiting</a>
    </li>
    <li>
      <a href="../reference/cfbd_coaches.html">Coaches</a>
    </li>
    <li>
      <a href="../reference/cfbd_conferences.html">Conferences</a>
    </li>
    <li>
      <a href="../reference/cfbd_venues.html">Venues</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">ESPN Data</li>
    <li>
      <a href="../reference/espn_metrics.html">ESPN Metrics</a>
    </li>
    <li>
      <a href="../reference/espn_ratings.html">ESPN Ratings</a>
    </li>
    <li>
      <a href="../reference/espn_cfb_scoreboard.html">ESPN Scoreboard</a>
    </li>
    <li>
      <a href="../reference/espn_cfb_pbp.html">ESPN PBP</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-book-reader"></span>
     
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/index.html">Vignettes</a>
    </li>
    <li class="dropdown-header">Introductory</li>
    <li>
      <a href="../articles/intro.html">CFB Analytics with cfbfastR</a>
    </li>
    <li>
      <a href="../articles/animated-wp-plotting.html">Animated Win Probability Plots</a>
    </li>
    <li>
      <a href="../articles/fourth-down-plot-tutorial.html">Fourth Down Tendency Plots</a>
    </li>
    <li>
      <a href="../articles/rolling-epa-graph.html">Rolling EPA Graphs</a>
    </li>
    <li>
      <a href="../articles/nth-rated-recruit.html">Visualizing Team Talent with Player Recruit Rankings</a>
    </li>
    <li>
      <a href="../articles/map-tutorial.html">Intro to Visualizing Recruiting Geography</a>
    </li>
    <li class="dropdown-header">Expected Points Model Fundamentals</li>
    <li>
      <a href="../articles/college-football-expected-points-model-fundamentals-part-i.html">Part 1 - Model Definition</a>
    </li>
    <li>
      <a href="../articles/college-football-expected-points-model-fundamentals-part-ii.html">Part 2 - Regression Models</a>
    </li>
    <li>
      <a href="../articles/college-football-expected-points-model-fundamentals-part-iii.html">Part 3 - History of Expected Points Models</a>
    </li>
    <li class="dropdown-header">CFBD Tutorials</li>
    <li>
      <a href="../articles/cfbd_betting.html">CFBD Betting</a>
    </li>
    <li>
      <a href="../articles/cfbd_games.html">CFBD Games</a>
    </li>
    <li>
      <a href="../articles/cfbd_plays.html">CFBD Plays</a>
    </li>
    <li>
      <a href="../articles/cfbd_recruiting.html">CFBD Recruiting</a>
    </li>
    <li>
      <a href="../articles/cfbd_stats.html">CFBD Stats</a>
    </li>
    <li>
      <a href="../articles/cfbd_teams.html">CFBD Teams</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">
    <span class="fas fa-newspaper"></span>
     
     News
  </a>
</li>
<li>
  <a href="http://gameonpaper.com/cfb">
    <span class="fas fa-football-ball"></span>
     
     GP
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-project-diagram"></span>
     
    SDV
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://sportsdataverse.org/">SportsDataverse</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">R Packages</li>
    <li>
      <a href="https://hoopR.sportsdataverse.org/">hoopR</a>
    </li>
    <li>
      <a href="https://wehoop.sportsdataverse.org/">wehoop</a>
    </li>
    <li>
      <a href="https://saiemgilani.github.io/recruitR/">recruitR</a>
    </li>
    <li>
      <a href="https://puntalytics.github.io/puntr">puntr</a>
    </li>
    <li>
      <a href="https://jacklich10.github.io/gamezoneR/">gamezoneR</a>
    </li>
    <li>
      <a href="https://kazink36.github.io/cfbplotR/">cfbplotR</a>
    </li>
    <li>
      <a href="https://kazink36.github.io/cfb4th/">cfb4th</a>
    </li>
    <li>
      <a href="https://jaseziv.github.io/worldfootballR/">worldfootballR</a>
    </li>
    <li>
      <a href="https://hockeyr.netlify.app/">hockeyR</a>
    </li>
    <li>
      <a href="https://BillPetti.github.io/baseballr/">baseballr</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Python Packages</li>
    <li>
      <a href="https://cfbfastR-py.sportsdataverse.org/">cfbfastR-py</a>
    </li>
    <li>
      <a href="https://hoopR-py.sportsdataverse.org/">hoopR-py</a>
    </li>
    <li>
      <a href="https://wehoop-py.sportsdataverse.org/">wehoop-py</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Node.js Packages</li>
    <li>
      <a href="https://saiemgilani.github.io/sportsdataverse/">sportsdataverse.js</a>
    </li>
    <li>
      <a href="https://github.com/nntrn/nfl-nerd/">nfl-nerd</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    <span class="fas fa-database"></span>
     
     Data
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="https://collegefootballdata.com">CFBData.com</a>
    </li>
    <li>
      <a href="https://github.com/saiemgilani/cfbfastR-data">Data Repository</a>
    </li>
    <li>
      <a href="https://github.com/saiemgilani/cfbfastR-raw">Raw Data Repository</a>
    </li>
  </ul>
</li>
<li>
  <a></a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://twitter.com/cfbfastR">
    <span class="fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/saiemgilani/cfbfastR/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="nth-rated-recruit_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Visualizing Team Talent from Player Recruiting Rankings</h1>
                        <h4 class="author">Eric Hess - Arbitrary Analytics <br><a href="https://twitter.com/arbitanalytics" target="blank"><img src="https://img.shields.io/twitter/follow/arbitanalytics?color=blue&amp;label=%40arbitanalytics&amp;logo=twitter&amp;style=for-the-badge" alt="@arbitanalytics"></a> <a href="https://github.com/ehess" target="blank"><img src="https://img.shields.io/github/followers/ehess?color=eee&amp;logo=Github&amp;style=for-the-badge" alt="@ehess"></a>
</h4>
            
      
      
      <div class="hidden name"><code>nth-rated-recruit.Rmd</code></div>

    </div>

    
    
<p>Hi <code>cfbfastR</code> users, I’m Eric Hess and I run the <a href="https://twitter.com/arbitanalytics">Twitter account</a> and blog called <a href="https://arbitraryanalytics.com/">Arbitrary Analytics</a>. My work focuses on sports analytics mainly for Nebraska and the Big Ten. Today, I’m going to walk through how I used the <code>cfbfastR</code> package to make a simple plot of recent recruiting classes. The final output will give you a quick way to visually approximate how much talent each school has recruited. I’m going to assume you have a basic understanding of working with R and that your development environment is already setup.</p>
<p>We start by loading the packages we need. The <code>cfbfastR</code> package will provide us with our source of data. The <code>dplyr</code> package gives us handy data manipulation tools and the ever useful pipe (<code><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></code>) syntax. Finally, <code>ggplot2</code> will allow us to make a simple, functional graph of our results.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html">requireNamespace</a></span><span class="op">(</span><span class="st">'pacman'</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span><span class="op">{</span>
  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">'pacman'</span><span class="op">)</span>
<span class="op">}</span>
<span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">dplyr</span>, <span class="va">ggplot2</span><span class="op">)</span>
<span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load_current_gh.html">p_load_current_gh</a></span><span class="op">(</span><span class="st">"saiemgilani/cfbfastR"</span><span class="op">)</span></code></pre></div>
<p>To create the plot I’m going to use two functions from <code>cfbfastR</code>. The first is the <code>cfbd_team_info</code> function. I’m going to pass <code>"B1G"</code> to the function for the <code>conference</code> argument to get info for just Big Ten teams. The next function I’m going to use is the <code>cfbd_recruiting_player</code> function. The apply function allows me to run the given function for each item in the data frame I pass to it. In this case I run it for each team in the Big Ten. I’m calling this function four times to get each year’s class. I’ll combine all of these into one large data frame with every team’s recruits. For the sake of simplicity, I am only using High School recruits as shown by the <code>recruit_type</code> argument. You can also get Prep School recruits (<code>recruit_type = "PrepSchool"</code>) or junior college recruits (<code>recruit_type = "JUCO"</code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">teams</span> <span class="op">&lt;-</span> <span class="fu">cfbfastR</span><span class="fu">::</span><span class="fu"><a href="../reference/cfbd_team_info.html">cfbd_team_info</a></span><span class="op">(</span>conference <span class="op">=</span> <span class="st">"B1G"</span><span class="op">)</span>
<span class="va">schools</span> <span class="op">&lt;-</span> <span class="va">teams</span><span class="op">$</span><span class="va">school</span>
<span class="va">yr</span> <span class="op">&lt;-</span> <span class="fu">cfbfastR</span><span class="fu">:::</span><span class="fu">most_recent_season</span><span class="op">(</span><span class="op">)</span>
<span class="va">year_range</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="va">yr</span><span class="op">-</span><span class="fl">3</span><span class="op">)</span><span class="op">:</span><span class="va">yr</span>
<span class="va">team_year_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html">expand.grid</a></span><span class="op">(</span>year<span class="op">=</span><span class="va">year_range</span>, school <span class="op">=</span> <span class="va">schools</span><span class="op">)</span>
<span class="fu">tictoc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html">tic</a></span><span class="op">(</span><span class="op">)</span>
<span class="fu">future</span><span class="fu">::</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html">plan</a></span><span class="op">(</span><span class="st">"multisession"</span><span class="op">)</span>
<span class="va">all.recruits</span> <span class="op">&lt;-</span> <span class="fu">furrr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/furrr/man/future_map2.html">future_map2_dfr</a></span><span class="op">(</span>
  .x <span class="op">=</span> <span class="va">team_year_df</span><span class="op">$</span><span class="va">year</span>,
  .y <span class="op">=</span> <span class="va">team_year_df</span><span class="op">$</span><span class="va">school</span>,
  <span class="kw">function</span><span class="op">(</span><span class="va">.x</span>,<span class="va">.y</span><span class="op">)</span><span class="op">{</span>
    <span class="fu">cfbfastR</span><span class="fu">::</span><span class="fu"><a href="../reference/cfbd_recruiting_player.html">cfbd_recruiting_player</a></span><span class="op">(</span>
      year <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">.x</span><span class="op">)</span>,
      team <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html">as.character</a></span><span class="op">(</span><span class="va">.y</span><span class="op">)</span>,
      recruit_type <span class="op">=</span> <span class="st">"HighSchool"</span>
    <span class="op">)</span>
  <span class="op">}</span>
<span class="op">)</span>

<span class="fu">tictoc</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tictoc/man/tic.html">toc</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<pre><code>## 14.534 sec elapsed</code></pre>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html">glimpse</a></span><span class="op">(</span><span class="va">all.recruits</span><span class="op">)</span></code></pre></div>
<pre><code>## Rows: 1,226
## Columns: 19
## $ id                      &lt;chr&gt; "43123", "43250", "43359", "43777", "43840", "…
## $ athlete_id              &lt;chr&gt; "4360401", "4360402", NA, "4360371", "4360389"…
## $ recruit_type            &lt;chr&gt; "HighSchool", "HighSchool", "HighSchool", "Hig…
## $ year                    &lt;int&gt; 2018, 2018, 2018, 2018, 2018, 2018, 2018, 2018…
## $ ranking                 &lt;int&gt; 216, 343, 452, 870, 933, 971, 973, 1042, 1153,…
## $ name                    &lt;chr&gt; "Calvin Avery", "Verdis Brown", "Reuben Unije"…
## $ school                  &lt;chr&gt; "Bishop Dunne", "IMG Academy", "IMG Academy", …
## $ committed_to            &lt;chr&gt; "Illinois", "Illinois", "Illinois", "Illinois"…
## $ position                &lt;chr&gt; "DT", "OC", "OT", "DUAL", "OLB", "OT", "DUAL",…
## $ height                  &lt;dbl&gt; 74, 75, 77, 75, 72, 77, 76, 77, 79, 68, 77, 71…
## $ weight                  &lt;int&gt; 310, 294, 303, 195, 200, 295, 213, 330, 245, 1…
## $ stars                   &lt;int&gt; 4, 4, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3…
## $ rating                  &lt;dbl&gt; 0.9174, 0.8944, 0.8824, 0.8580, 0.8551, 0.8539…
## $ city                    &lt;chr&gt; "Dallas", "Chicago", "Bradenton", "Peoria", "S…
## $ state_province          &lt;chr&gt; "TX", "IL", "FL", "IL", "FL", "IL", "TX", "TX"…
## $ country                 &lt;chr&gt; "USA", "USA", "USA", "USA", "USA", "USA", "USA…
## $ hometown_info_latitude  &lt;chr&gt; "32.7762719", "41.8755616", "27.4989278", "40.…
## $ hometown_info_longitude &lt;chr&gt; "-96.7968559", "-87.6244212", "-82.5748194", "…
## $ hometown_info_fips_code &lt;chr&gt; "48113", "17031", "12081", "17143", "12103", "…</code></pre>
<p>The next step is cleaning the data. The <code><a href="../reference/cfbd_recruiting_player.html">cfbd_recruiting_player()</a></code> function gives us 14 pieces of data for each player. Our graph is going to focus on just the rating and what school they committed to. I’m going to keep the player name as well as a check field so I can go back and check my data set more quickly if I have any errors. The next line uses <code>dplyr</code> syntax to give me just the highest rated 85 recruits in order by their rating. I use this info to assign a ranking for each school’s 1-nth recruit. Finally, I use the teams data frame again so each recruits school information can be used on our graph.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">recruits.limited</span> <span class="op">&lt;-</span> <span class="va">all.recruits</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">name</span>, <span class="va">rating</span>, <span class="va">committed_to</span><span class="op">)</span>
<span class="va">recruits.sorted</span> <span class="op">&lt;-</span> <span class="va">recruits.limited</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">committed_to</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/top_n.html">top_n</a></span><span class="op">(</span><span class="fl">85</span>, <span class="va">rating</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span><span class="op">(</span><span class="va">committed_to</span>, <span class="op">-</span><span class="va">rating</span>,.by_group<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>num <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/ranking.html">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">ungroup</a></span><span class="op">(</span><span class="op">)</span>

<span class="va">recruits.final</span> <span class="op">&lt;-</span> <span class="va">recruits.sorted</span> <span class="op">%&gt;%</span> 
  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html">left_join</a></span><span class="op">(</span><span class="va">teams</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"committed_to"</span><span class="op">=</span><span class="st">"school"</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>If you follow the Big Ten you know a lot of schools have a shade of red as their primary color. This can make some plots hard to read. Because of this I’m filtering down my data to look at just recruits who committed to a Big Ten West division school. For <code>ggplot2</code> to use a manually defined color set, I must get a vector of colors that I want, each team’s primary color, and assign each value a name corresponding to the school I’m interested in.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">big.ten.west</span> <span class="op">&lt;-</span> <span class="va">recruits.final</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">division</span> <span class="op">==</span> <span class="st">"West"</span><span class="op">)</span>
<span class="va">big.ten.west.teams</span> <span class="op">&lt;-</span> <span class="va">teams</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">division</span> <span class="op">==</span> <span class="st">"West"</span><span class="op">)</span>

<span class="va">big.ten.west.colors</span> <span class="op">&lt;-</span> <span class="va">big.ten.west.teams</span><span class="op">$</span><span class="va">color</span>
<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">big.ten.west.colors</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">big.ten.west.teams</span><span class="op">$</span><span class="va">school</span></code></pre></div>
<p>Now that we have our data collected and cleaned we finally get to the fun part - plotting. We plot each player’s rating based on the ranking of commit they are to a school. We also tell ggplot to use the manual color values we defined earlier. I added some extra horizontal lines to approximate the ratings of 3, 4, and 5 star recruits.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">big.ten.west</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">num</span>, y<span class="op">=</span><span class="va">rating</span>, color <span class="op">=</span> <span class="va">committed_to</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> 
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1.2</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html">scale_color_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="va">big.ten.west.colors</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">.9834</span>, <span class="fl">.8901</span>, <span class="fl">.7964</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, label <span class="op">=</span> <span class="st">"~ 5 Star"</span>, y <span class="op">=</span> <span class="fl">.99</span>, x <span class="op">=</span> <span class="fl">80</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, label <span class="op">=</span> <span class="st">"~ 4 Star"</span>, y <span class="op">=</span> <span class="fl">.90</span>, x <span class="op">=</span> <span class="fl">80</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/annotate.html">annotate</a></span><span class="op">(</span><span class="st">"text"</span>, label <span class="op">=</span> <span class="st">"~ 3 Star"</span>, y <span class="op">=</span> <span class="fl">.81</span>, x <span class="op">=</span> <span class="fl">10</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Player Rating"</span>,
       x <span class="op">=</span> <span class="st">"Player Rank"</span>,
       title <span class="op">=</span> <span class="st">"nth-Ranked High School Recruit"</span>,
       subtitle <span class="op">=</span> <span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html">glue</a></span><span class="op">(</span><span class="st">"Top 85 High School Signees {yr-3}-{yr} by Big Ten West Programs"</span><span class="op">)</span>,
       caption <span class="op">=</span> <span class="st">"Graph by @arbitanalytics, Data from @cfbfastR"</span><span class="op">)</span></code></pre></div>
<p><img src="nth-rated-recruit_files/figure-html/recruit_plot-1.png" width="700"></p>
<p>From this graph we can see how well teams have recruited the last four years. A large gap between two of the lines shows that one team has recruited much more talent at that relative position of recruiting. In the Big Ten West graph above, we can see that Nebraska and Wisconsin recruit similar top level recruits. Both schools top 5 recruits are 0.95 rated or higher. However, Nebraska’s classes are much stronger from the 10th recruit on. While this graphic oversimplifies the team building process (excluding transfers, walk-ons, etc.), it gives the reader a good feel for the talent level at a program in a quick glance.</p>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://twitter.com/saiemgilani">Saiem Gilani</a>, <a href="https://twitter.com/akeaswaran">Akshay Easwaran</a>, <a href="https://twitter.com/JaredDLee">Jared Lee</a>, <a href="https://twitter.com/arbitanalytics">Eric Hess</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '002e977de61519c48dce057f58ed1d24',
    indexName: 'cfbfastR',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
